Chapter10 條條大路通羅馬 -- 表單存取方法
=====
* ### 存取方法總結
    * ### const: 唯一二級索引 -> 聚簇索引或直接透過聚簇索引 (常數相等比較)。
    * ### ref: 普通二級索引 -> 聚簇索引 (常數相等比較)。
    * ### ref_or_null: 和 ref 相同但多的 null 比較 (常數相等比較)。
    * ### range: 多個單點或範圍掃描區間。
    * ### index: 遍歷二級索引且不用回表。
    * ### all: 全資料表掃描 (聚簇索引)。
    * ### index merge
        * ### Intersection 索引合併。
        * ### Union 索引合併。
        * ### Sort - Union 索引合併。
    * ### 註: MySQL 沒有 Sort - intersection。
* ### const
    * ### 透過主鍵或唯一二級索引與常數進行相等比較定位一筆紀錄的存取方法。
* ### ref
    * ### 透過搜索條件為二級索引列與常數進行相等比較形成掃描區間為單點掃描區間採用二級索引來執行查詢的存取方法。
    * ### 每獲得一筆二級索引記錄就會立刻執行回表操作。
* ### ref_or_null
    * ### 使用二級索引而非全資料表掃描的方式執行該查詢，對應的掃描區間為單點掃描區間或 [NULL, NULL] 時執行查詢的存取方法。
* ### range
    * ### 使用索引執行查詢且對應的掃描區間為許多個單點掃描區間或範圍掃描區間的查詢存取方法。
* ### index
    * ### 遍歷二級索引且不用回表。
* ### all
    * ### 全資料表掃描 (聚簇索引)。
* ### 注意事項
    * ### 重溫二級索引 + 回表
        * ### 每次從二級索引中讀取到一筆記錄就會根據主鍵進行回表操作。
        * ### 一次所進行的回表操作對應的聚簇索引中頁號是無序的。
        * ### 回表操作相當於隨機讀取聚簇索引中的頁面。
        * ### 隨機 I/O 嘛... 性能負擔大。
        * ### MySQL 工程師提出名為 Disk - Sweep Multi - Range (MRR 多範圍存取) 的最佳化措施。
        * ### 先讀取一部分二級索引，並依主鍵排序，後執行回表操作，可以避免一些隨機 I/O 造成負擔，但要觸發 MRR 最佳化措施有一些條件，有興趣可參考官方文件。
* ### 索引合併 (index merge): 使用多的索引來完成一次查詢的執行方法稱為 index merge。
    * ### 一般情況下只會為單一索引生成掃描區間。
    * ### Intersection 索引合併
        * ### 當 query 的條件限制有多個列都具備索引可供執行查詢的存取方法使用時，除了計算各個的查詢成本外，也可以分別針對各個列執行查詢，後從各個查詢結果中找出存在相同主鍵的記錄 (符合條件限制)，根據這些記錄再進行回表操作，也就是根據各個結果的交集進行回表操作。
        * ### 執行 Intersection 索引合併要求每個索引獲取到的二級索引記錄是按照主鍵值排序的。
            * ### 取得交集較為容易。
            * ### 避免回表操作時的隨機 I/O。
        * ### 如果各個查詢結果並非按照主鍵排序，則無法觸發 Intersection 索引合併。
    * ### Union 索引合併
        * ### 當 query 的條件限制有多個列都具備索引可供執行查詢的存取方法使用時，除了計算各個的查詢成本外，也可以分別針對各個列執行查詢，後從各個查詢結果中 "去重"，根據結果再進行回表操作，也就是根據各個結果的聯集進行回表操作。
        * ### 執行 Union 索引合併要求每個索引獲取到的二級索引記錄是按照主鍵值排序的。
            * ### 取得聯集較為容易。
            * ### 避免回表操作時的隨機 I/O。
        * ### 如果各個查詢結果並非按照主鍵排序，則無法觸發 Union 索引合併。
    * ### Sort - Union 索引合併
        * ### 與 Union 索引合併大致相同，只是當每個索引獲取到的二級索引記錄 "不是" 按照主鍵值排序時，會先進行排序後才執行聯集操作。
        * ### 比 Union 索引合併多了排序的過程。
    * ### MySQL "沒有" Sort - intersection
<br />
