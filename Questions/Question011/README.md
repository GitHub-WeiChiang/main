Question011 - Redis 缓存淘汰策略 LRU 和 LFU 差在哪 ?
=====
* ### LRU (Least Recently Used): 如果一个数据在最近一段时间没有被用到，那么将来被使用到的可能性也很小，所以就可以被淘汰掉。
* ### 其原理是维护一个双向链表，新插入的 key，會被放在鏈的头部，并检查是否超出总容量，如果超出则删除最后的 key; 访问 key 时，无论是查找还是更新，该 Key 都會被调整到头部。
* ### Redis 使用的是近似 LRU 算法，每次随机出 5 (默认) 个 key，从里面執行淘汰算法，可以通过 maxmemory-samples 参数修改采样数量，配置的越大，淘汰的结果越接近于严格的 LRU 算法。
* ### Redis 为了实现近似 LRU 算法，给每个 key 增加了一个额外的字段，用来存储该 key 最后一次被访问的时间。
* ### Redis3.0 改善了 LRU 算法，提供一个待淘汰候选 key 的 pool 作為選擇 key 與實際淘汰行為的緩衝。
* ### LFU (Least Frequently Used) 算法是 Redis4.0 里面新加的一种淘汰策略，核心思想是根据 key 的最近被访问的频率进行淘汰，很少被访问的优先被淘汰，被访问的多的则被留下来。
* ### LFU 算法能更好的表示一个 key 被访问的热度，假如使用的是 LRU 算法，一个 key 很久没有被访问到，只刚刚是偶尔被访问了一次，那么它就被认为是热点数据; 如果使用 LFU 算法则不会出现这种情况，LFU 原理使用计数器来对 key 进行訪問次數的排序。
* ### 一般情况下，LFU 效率要优于 LRU，且能够避免周期性或者偶发性的操作导致缓存命中率下降的问题，但若数据访问模式改变，LFU 需要更长时间来适用新的访问模式，因 LFU 存在历史数据影响将来数据的 "缓存污染" 問題。
<br />
